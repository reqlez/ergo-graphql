"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.requestedRelationFilter = exports.requestedEmbeddedFieldsFilter = exports.requestedFieldsFilter = void 0;
var ConfigureLoader_1 = require("../ConfigureLoader");
var requestedFieldsFilter = function (ignoredFields, graphQLFieldNames, selection, context) { return function (column) {
    var _a;
    var fieldName = (_a = graphQLFieldNames.get(column.propertyName)) !== null && _a !== void 0 ? _a : column.propertyName;
    return (!(0, ConfigureLoader_1.resolvePredicate)(ignoredFields.get(column.propertyName), context, selection) &&
        (column.isPrimary || selection.hasOwnProperty(fieldName)));
}; };
exports.requestedFieldsFilter = requestedFieldsFilter;
var requestedEmbeddedFieldsFilter = function (ignoredFields, graphQLFieldNames, selection, context) { return function (embed) {
    var _a;
    var fieldName = (_a = graphQLFieldNames.get(embed.propertyName)) !== null && _a !== void 0 ? _a : embed.propertyName;
    return (!(0, ConfigureLoader_1.resolvePredicate)(ignoredFields.get(embed.propertyName), context, selection) && selection.hasOwnProperty(fieldName));
}; };
exports.requestedEmbeddedFieldsFilter = requestedEmbeddedFieldsFilter;
var requestedRelationFilter = function (ignoredFields, requiredFields, graphQLFieldNames, selection, context) { return function (relation) {
    var _a;
    var fieldName = (_a = graphQLFieldNames.get(relation.propertyName)) !== null && _a !== void 0 ? _a : relation.propertyName;
    return (!(0, ConfigureLoader_1.resolvePredicate)(ignoredFields.get(relation.propertyName), context, selection) &&
        (selection.hasOwnProperty(fieldName) ||
            (0, ConfigureLoader_1.resolvePredicate)(requiredFields.get(relation.propertyName), context, selection)));
}; };
exports.requestedRelationFilter = requestedRelationFilter;
//# sourceMappingURL=filters.js.map